<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="alternate" type="application/rss+xml" href="/srinivasulla.github.io/blog/rss.xml" title="Srinivasulu Ullaganti Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/srinivasulla.github.io/blog/atom.xml" title="Srinivasulu Ullaganti Blog Atom Feed"><title data-react-helmet="true">Deploy Reportportal on Azure Kubernetes Cluster | Srinivasulu Ullaganti</title><meta data-react-helmet="true" property="og:url" content="https://srinivasulla.github.io/srinivasulla.github.io/docs/Articles/ReportPortalKubernetes"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Deploy Reportportal on Azure Kubernetes Cluster | Srinivasulu Ullaganti"><meta data-react-helmet="true" name="description" content="This Article is Written as a part of Kongsberg Digital Blogging Challange."><meta data-react-helmet="true" property="og:description" content="This Article is Written as a part of Kongsberg Digital Blogging Challange."><link data-react-helmet="true" rel="shortcut icon" href="/srinivasulla.github.io/img/AutoInfra.png"><link data-react-helmet="true" rel="canonical" href="https://srinivasulla.github.io/srinivasulla.github.io/docs/Articles/ReportPortalKubernetes"><link data-react-helmet="true" rel="alternate" href="https://srinivasulla.github.io/srinivasulla.github.io/docs/Articles/ReportPortalKubernetes" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://srinivasulla.github.io/srinivasulla.github.io/docs/Articles/ReportPortalKubernetes" hreflang="x-default"><link rel="stylesheet" href="/srinivasulla.github.io/assets/css/styles.2a08f740.css">
<link rel="preload" href="/srinivasulla.github.io/assets/js/runtime~main.42965fa5.js" as="script">
<link rel="preload" href="/srinivasulla.github.io/assets/js/main.7e84ffa8.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/srinivasulla.github.io/"><img src="/srinivasulla.github.io/img/logo.PNG" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/srinivasulla.github.io/img/logo.PNG" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Home</b></a><a class="navbar__item navbar__link navbar__link--active" href="/srinivasulla.github.io/docs/Articles/ReportPortal">Articles</a><a class="navbar__item navbar__link" href="/srinivasulla.github.io/blog">About MySelf</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/sullaganti" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_cxYs react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/srinivasulla.github.io/"><img src="/srinivasulla.github.io/img/logo.PNG" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/srinivasulla.github.io/img/logo.PNG" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Home</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/srinivasulla.github.io/docs/Articles/ReportPortal">Articles</a></li><li class="menu__list-item"><a class="menu__link" href="/srinivasulla.github.io/blog">About MySelf</a></li><li class="menu__list-item"><a href="https://github.com/sullaganti" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu menu--responsive thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Articles - TestAutomation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/srinivasulla.github.io/docs/Articles/ReportPortal">How to Achieve Machine Learning In TestAutomation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/srinivasulla.github.io/docs/Articles/SonarQube">Write Bug Free Automation Code</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/srinivasulla.github.io/docs/Articles/Healenium">Self Healing Selenium - Healenium</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/srinivasulla.github.io/docs/Articles/PowerBI">Stream Test Results To PowerBI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/srinivasulla.github.io/docs/Articles/AzDevops_Selenium_Java">Run Selenium Tests in AzureDevOps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/srinivasulla.github.io/docs/Articles/Soap_RestAssured">Automate SOAP APIs using Rest Assured</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/srinivasulla.github.io/docs/Articles/SCM">SetUp your own On-Premise Source Code Management tools.</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/srinivasulla.github.io/docs/Articles/MicrosoftTeams">Send Your Test Results to Microsoft Teams using AdaptiveCards.io</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/srinivasulla.github.io/docs/Articles/RestAssuredAllure">Advanced RestAssured Logging in Allure Report</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/srinivasulla.github.io/docs/Articles/RestAssuredExtent">Advanced RestAssured Logging in Extent Report</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/srinivasulla.github.io/docs/Articles/ReportPortalKubernetes">Deploy Reportportal on Azure Kubernetes Cluster</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/srinivasulla.github.io/docs/Articles/MobileAppTesting">Things To Test Before Going Live With A Mobile App</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/srinivasulla.github.io/docs/Articles/2024-06-25-azureAppServiceForAutomationReports">Azure App Service for Automation Reports</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/srinivasulla.github.io/docs/Articles/Navigation">All Article Links</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="markdown"><header><h1 class="h1Heading_dC7a">Deploy Reportportal.io on Azure Kubernetes Service</h1></header><p>This Article is Written as a part of Kongsberg Digital Blogging Challange.</p><p>#KdiBloggingChallange #articleAWeek #KongsbergTechCommunity</p><p>Couple of years ago i have written my first article on <a href="https://autoinfra.github.io/home/docs/Articles/ReportPortal" target="_blank" rel="noopener noreferrer">How to deploy Reportportal on Dockers</a>, Now it is time for Kubernetes</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="overall-information"></a>Overall information<a class="hash-link" href="#overall-information" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="basic-deployment-architecture"></a>Basic Deployment Architecture:<a class="hash-link" href="#basic-deployment-architecture" title="Direct link to heading">#</a></h4><p><img alt="image" src="/srinivasulla.github.io/assets/images/RPKubernetesArchitecture-4bea6b9d4292e2112342281891b210d0.jpg"></p><p>This project is created to install ReportPortal on Kubernetes with Helm. I have faced many issues while following the Official Documentation and for a novice Kubernetes guys it is very difficult to understand the deployement steps.</p><p>In this articles i am describing installation of all mandatory services to run the application such as PostgreSQL, elasticsearch,Minio and RabbitMQ.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="prerequisites"></a>PreRequisites:<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h3><ul><li>Aks Cluster </li><li>Helm</li></ul><blockquote><p>Create a AKS Cluster</p></blockquote><p>The Azure Kubernetes Service (AKS) offers simple deployments for Kubernetes clusters.</p><p>To deploy an AKS cluster use the following guides:</p><ul><li><a href="https://docs.microsoft.com/en-us/azure/aks/kubernetes-walkthrough-portal" target="_blank" rel="noopener noreferrer">By using the Azure portal</a></li><li><a href="https://docs.microsoft.com/en-us/azure/aks/kubernetes-walkthrough" target="_blank" rel="noopener noreferrer">By using the Azure CLI</a></li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>NodeSize and No.of Nodes to select</h5></div><div class="admonition-content"><p>While creating AKS cluster it is recomended to select a 16 GB Ram node and 100+ GB disk space for your Node.
I have selected Standard_B4ms for my requirements</p></div></div><p><img alt="image" src="/srinivasulla.github.io/assets/images/selectNodeSize-e4b28b16b22479934ce717dfe8c55862.jpg"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="reportportal-use-the-following-images"></a>ReportPortal use the following images:<a class="hash-link" href="#reportportal-use-the-following-images" title="Direct link to heading">#</a></h4><ul><li><a href="https://github.com/reportportal/service-authorization" target="_blank" rel="noopener noreferrer"><code>service-authorization</code></a> Authorization Service. In charge of access tokens distribution</li><li><a href="https://github.com/reportportal/service-api" target="_blank" rel="noopener noreferrer"><code>service-api</code></a> API Service. Application Backend</li><li><a href="https://github.com/reportportal/service-ui" target="_blank" rel="noopener noreferrer"><code>service-ui</code></a> UI Service. Application Frontend</li><li><a href="https://github.com/reportportal/service-auto-analyzer" target="_blank" rel="noopener noreferrer"><code>service-analyzer</code></a> Analyzer Service. Finds most relevant test fail prob</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="other-images-we-are-going-to-need-non-managed-by-reportportal-team"></a>Other Images we are going to need (non managed by ReportPortal team):<a class="hash-link" href="#other-images-we-are-going-to-need-non-managed-by-reportportal-team" title="Direct link to heading">#</a></h4><ul><li><code>RabbitMQ</code> (Helm chart installation)</li><li><code>ElasticSearch</code> (Helm chart installation | Amazon Elasticsearch Service)</li><li><code>PostgreSQL</code> (Helm chart installation | Amazon PostgreSQL RDS | Azure Database for PostgreSQL)</li><li><code>MinIO</code> (Helm chart installation)</li></ul><p>All configuration variables are presented in <code>values.yaml</code> file.</p><blockquote><p>Install and configure Helm package manager</p></blockquote><p>Note: Helm is installed by default when you create AKS Cluster, if Helm is not created then use the following:</p><ul><li><a href="https://docs.microsoft.com/en-us/azure/aks/kubernetes-helm" target="_blank" rel="noopener noreferrer">Install Helm On Azure</a></li></ul><p>Confirm that Helm is running with the following command</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">helm version</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="deploy-nginx-ingress-controller"></a>Deploy NGINX Ingress controller<a class="hash-link" href="#deploy-nginx-ingress-controller" title="Direct link to heading">#</a></h4><p>Please find the guides below:</p><ul><li><a href="https://github.com/kubernetes/ingress-nginx/blob/master/docs/deploy/index.md#azure" target="_blank" rel="noopener noreferrer">NGNIX ON AZURE</a></li></ul><p>Or you can istall an NGINX ingress controller using Helm.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx &amp;&amp; helm repo update</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="now-our-aks-cluster-is-ready-lets-move-forward-with-the-deployment-steps"></a>Now Our AKS Cluster is ready, Lets move forward with the Deployment steps<a class="hash-link" href="#now-our-aks-cluster-is-ready-lets-move-forward-with-the-deployment-steps" title="Direct link to heading">#</a></h5><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step1-download-the-latest-reportportal-kubernetes-files"></a>Step1: Download the Latest ReportPortal Kubernetes Files.<a class="hash-link" href="#step1-download-the-latest-reportportal-kubernetes-files" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">helm repo add rp_repo https://reportportal.github.io/kubernetes</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">helm pull rp_repo/reportportal â€“untar</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step2--update-helm-dependency-with-reportportal"></a>Step2:  Update HELM dependency with reportportal<a class="hash-link" href="#step2--update-helm-dependency-with-reportportal" title="Direct link to heading">#</a></h4><p>Run Command <code>helm dependency update reportportal</code></p><p>Once you run above command, output Should be something like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">Getting updates for unmanaged Helm repositories...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...Successfully got an update from the &quot;https://raw.githubusercontent.com/bitnami/charts/archive-full-index/bitnami&quot; chart repository</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...Successfully got an update from the &quot;https://raw.githubusercontent.com/bitnami/charts/archive-full-index/bitnami&quot; chart repository</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...Successfully got an update from the &quot;https://raw.githubusercontent.com/bitnami/charts/archive-full-index/bitnami&quot; chart repository</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Hang tight while we grab the latest from your chart repositories...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...Successfully got an update from the &quot;rp_repo&quot; chart repository</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...Successfully got an update from the &quot;elastic&quot; chart repository</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...Successfully got an update from the &quot;ingress-nginx&quot; chart repository</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...Successfully got an update from the &quot;bitnami&quot; chart repository</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Update Complete. âŽˆHappy Helming!âŽˆ</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Saving 4 charts</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Downloading postgresql from repo https://raw.githubusercontent.com/bitnami/charts/archive-full-index/bitnami</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Downloading rabbitmq from repo https://raw.githubusercontent.com/bitnami/charts/archive-full-index/bitnami</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Downloading elasticsearch from repo https://helm.elastic.co</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Downloading minio from repo https://raw.githubusercontent.com/bitnami/charts/archive-full-index/bitnami</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Deleting outdated charts </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step3-install-ngnix-ingress-latest-version"></a>Step3: Install NGNIX-INGRESS Latest Version<a class="hash-link" href="#step3-install-ngnix-ingress-latest-version" title="Direct link to heading">#</a></h4><p>Run Command <code>helm install nginx-ingress ingress-nginx/ingress-nginx --version 4.3.0</code></p><p>Once you run above command, output Should be something like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">NAME: nginx-ingress</span></span><span class="token-line" style="color:#393A34"><span class="token plain">LAST DEPLOYED: Sat Oct 22 13:13:36 2022</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE: default</span></span><span class="token-line" style="color:#393A34"><span class="token plain">STATUS: deployed</span></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION: 1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST SUITE: None</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NOTES:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">The ingress-nginx controller has been installed.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">It may take a few minutes for the LoadBalancer IP to be available.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">You can watch the status by running &#x27;kubectl --namespace default get services -o wide -w nginx-ingress-ingress-nginx-controller&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">An example Ingress that makes use of the controller:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  apiVersion: networking.k8s.io/v1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  kind: Ingress</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  metadata:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: example</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace: foo</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  spec:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ingressClassName: nginx</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    rules:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - host: www.example.com</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        http:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          paths:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            - pathType: Prefix</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              backend:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                service:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                  name: exampleService</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                  port:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    number: 80</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              path: /</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # This section is only required if TLS is to be enabled for the Ingress</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    tls:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      - hosts:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        - www.example.com</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        secretName: example-tls</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">If TLS is enabled for the Ingress, a Secret containing the certificate and key must also be provided:</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  apiVersion: v1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  kind: Secret</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  metadata:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: example-tls</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace: foo</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  data:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    tls.crt: &lt;base64 encoded cert&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    tls.key: &lt;base64 encoded</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step4-install-elasticsearch"></a>Step4: Install ElasticSearch<a class="hash-link" href="#step4-install-elasticsearch" title="Direct link to heading">#</a></h4><p>Run command <code>helm install elastic ./reportportal/charts/elasticsearch-7.10.2.tgz --set replicas=1</code></p><p>If you get any errors then Run these commands </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI helm"><pre tabindex="0" class="prism-code language-helm codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">helm dependency build ./reportportal/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install elastic ./reportportal/charts/elasticsearch-7.10.2.tgz --set replicas=1</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Once you run above command, output Should be something like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">W1022 13:16:07.760393   17116 warnings.go:70] policy/v1beta1 PodDisruptionBudget is deprecated in v1.21+, unavailable in v1.25+; use policy/v1 PodDisruptionB</span></span><span class="token-line" style="color:#393A34"><span class="token plain">udget</span></span><span class="token-line" style="color:#393A34"><span class="token plain">W1022 13:16:07.865213   17116 warnings.go:70] policy/v1beta1 PodDisruptionBudget is deprecated in v1.21+, unavailable in v1.25+; use policy/v1 PodDisruptionB</span></span><span class="token-line" style="color:#393A34"><span class="token plain">udget</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME: elastic</span></span><span class="token-line" style="color:#393A34"><span class="token plain">LAST DEPLOYED: Sat Oct 22 13:16:07 2022</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE: default</span></span><span class="token-line" style="color:#393A34"><span class="token plain">STATUS: deployed</span></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION: 1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NOTES:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">1. Watch all cluster members come up.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  $ kubectl get pods --namespace=default -l app=elasticsearch-master -w</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Test cluster health using Helm test.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  $ helm test elastic</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step5-install-rabbitmq"></a>Step5: Install rabbitmq<a class="hash-link" href="#step5-install-rabbitmq" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI helm"><pre tabindex="0" class="prism-code language-helm codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl exec -it rabbitmq-0 -- rabbitmqctl set_vm_memory_high_watermark 0.8</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step6-install-postgres"></a>STEP6: Install Postgres<a class="hash-link" href="#step6-install-postgres" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI helm"><pre tabindex="0" class="prism-code language-helm codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">  --set postgresqlUsername=rpuser,postgresqlPassword=rppass,postgresqlDatabase=reportportal,postgresqlPostgresPassword=rppass \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f ./reportportal/postgresql/values.yaml \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ./reportportal/charts/postgresql-10.9.4.tgz</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Once you run above command, output Should be something like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">NAME: postgres</span></span><span class="token-line" style="color:#393A34"><span class="token plain">LAST DEPLOYED: Sat Oct 22 13:17:51 2022</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE: default</span></span><span class="token-line" style="color:#393A34"><span class="token plain">STATUS: deployed</span></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION: 1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST SUITE: None</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NOTES:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">** Please be patient while the chart is being deployed **</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">PostgreSQL can be accessed via port 5432 on the following DNS names from within your cluster:</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    postgres-postgresql.default.svc.cluster.local - Read/Write connection</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">To get the password for &quot;postgres&quot; run:</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    export POSTGRES_ADMIN_PASSWORD=$(kubectl get secret --namespace default postgres-postgresql -o jsonpath=&quot;{.data.postgresql-postgres-password}&quot; | base64 -</span></span><span class="token-line" style="color:#393A34"><span class="token plain">-decode)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">To get the password for &quot;rpuser&quot; run:</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    export POSTGRES_PASSWORD=$(kubectl get secret --namespace default postgres-postgresql -o jsonpath=&quot;{.data.postgresql-password}&quot; | base64 --decode)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">To connect to your database run the following command:</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    kubectl run postgres-postgresql-client --rm --tty -i --restart=&#x27;Never&#x27; --namespace default --image docker.io/bitnami/postgresql:11.13.0-debian-10-r12 --e</span></span><span class="token-line" style="color:#393A34"><span class="token plain">nv=&quot;PGPASSWORD=$POSTGRES_PASSWORD&quot; --command -- psql --host postgres-postgresql -U rpuser -d reportportal -p 5432</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">To connect to your database from outside the cluster execute the following commands:</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    kubectl port-forward --namespace default svc/postgres-postgresql 5432:5432 &amp;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    PGPASSWORD=&quot;$POSTGRES_PASSWORD&quot; psql --host 127.0.0.1 -U rpuser -d reportportal -p 5432</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step7-install-minio"></a>Step7: Install Minio<a class="hash-link" href="#step7-install-minio" title="Direct link to heading">#</a></h4><p><code>helm install minio --set accessKey.password=minio,secretKey.password=miniominio,persistence.size=40Gi ./reportportal/charts/minio-7.1.9.tgz</code></p><p>Once you run above command, output Should be something like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">NAME: minio</span></span><span class="token-line" style="color:#393A34"><span class="token plain">LAST DEPLOYED: Sat Oct 22 13:18:38 2022</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE: default</span></span><span class="token-line" style="color:#393A34"><span class="token plain">STATUS: deployed</span></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION: 1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST SUITE: None</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NOTES:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">** Please be patient while the chart is being deployed **</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">MinIO&amp;reg; can be accessed via port 9000 on the following DNS name from within your cluster:</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   minio.default.svc.cluster.local</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">To get your credentials run:</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   export ACCESS_KEY=$(kubectl get secret --namespace default minio -o jsonpath=&quot;{.data.access-key}&quot; | base64 --decode)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   export SECRET_KEY=$(kubectl get secret --namespace default minio -o jsonpath=&quot;{.data.secret-key}&quot; | base64 --decode)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">To connect to your MinIO&amp;reg; server using a client:</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">- Run a MinIO&amp;reg; Client pod and append the desired command (e.g. &#x27;admin info&#x27;):</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   kubectl run --namespace default minio-client \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     --rm --tty -i --restart=&#x27;Never&#x27; \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     --env MINIO_SERVER_ACCESS_KEY=$ACCESS_KEY \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     --env MINIO_SERVER_SECRET_KEY=$SECRET_KEY \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     --env MINIO_SERVER_HOST=minio \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     --image docker.io/bitnami/minio-client:2021.7.27-debian-10-r26 -- admin info minio</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">To access the MinIO&amp;reg; web UI:</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">- Get the MinIO&amp;reg; URL:</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   echo &quot;MinIO&amp;reg; web URL: http://127.0.0.1:9000/minio&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   kubectl port-forward --namespace default svc/minio 9000:9000 </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step8-optional-package-reportportal-helm-package-reportportal"></a>Step8: [Optional] Package Reportportal: <code>helm package ./reportportal/</code><a class="hash-link" href="#step8-optional-package-reportportal-helm-package-reportportal" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step9-install-reportportal"></a>Step9: Install reportportal<a class="hash-link" href="#step9-install-reportportal" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI helm"><pre tabindex="0" class="prism-code language-helm codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">  --set postgresql.SecretName=postgres-postgresql,postgresql.endpoint.address=postgres-postgresql.default.svc.cluster.local \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set rabbitmq.SecretName=rabbit-rabbitmq,rabbitmq.endpoint.address=rabbit-rabbitmq.default.svc.cluster.local \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set minio.secretName=minio,minio.endpoint=http://minio.default.svc.cluster.local:9000,minio.endpointshort=minio.default.svc.cluster.local:9000 \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ./reportportal</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Once you run above command, output Should be something like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI log"><pre tabindex="0" class="prism-code language-log codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">NAME: reportportal</span></span><span class="token-line" style="color:#393A34"><span class="token plain">LAST DEPLOYED: Sat Oct 22 13:19:37 2022</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE: default</span></span><span class="token-line" style="color:#393A34"><span class="token plain">STATUS: deployed</span></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION: 1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST SUITE: None</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NOTES:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ReportPortal is now available at:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    - reportportal.k8.com</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="hola-your-reportportal-is-now-ready"></a>Hola! Your reportportal is now Ready.<a class="hash-link" href="#hola-your-reportportal-is-now-ready" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step-10-validate-the-pods-and-service"></a>Step 10: Validate the pods and service<a class="hash-link" href="#step-10-validate-the-pods-and-service" title="Direct link to heading">#</a></h4><p>Once ReportPortal is deployed, you can validate if the application is up and running by:</p><ol><li>Check the pods status:</li></ol><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Everything should be in &quot;Running&quot; status, and &#x27;migrations&#x27; service in &quot;Completed&quot;</p><ol start="2"><li>Open your LoadBalancer address in a web browser</li></ol><p>Since you expose your application with an Ingress controller, note LoadBalancer&#x27;s EXTERNAL-IP address by run:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get service</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>As an example, if you have:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">my-nginx-nginx-ingress-controller  LoadBalancer 10.100.69.32  128.245.232.2342342  80:32633/TCP,443:31683/TCP  2s</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Then <a href="http://128.245.232.2342342/ui" target="_blank" rel="noopener noreferrer">http://128.245.232.2342342/ui</a> is your Reportportal UI address</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="step-11-start-work-with-reportportal"></a>Step 11: Start work with ReportPortal<a class="hash-link" href="#step-11-start-work-with-reportportal" title="Direct link to heading">#</a></h4><p>Open the http://&lt;LoadBalancer&#x27;s EXTERNAL-IP address&gt; page in your browser. Defalut login and password are:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">superadmin</span></span><span class="token-line" style="color:#393A34"><span class="token plain">erebus</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>P.S: If you can&#x27;t login - please check logs of api and uat pods. It take some time to initialize</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="run-reportportal-over-ssl-https"></a>Run ReportPortal over SSL (HTTPS)<a class="hash-link" href="#run-reportportal-over-ssl-https" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="1-configure-a-custom-domain-name-for-your-reportportal-website"></a>1. Configure a custom domain name for your ReportPortal website<a class="hash-link" href="#1-configure-a-custom-domain-name-for-your-reportportal-website" title="Direct link to heading">#</a></h4><p>Set up a domain name you own at the domain registrar Or if your Organization has a DNS Zone in Azure, Create a record set like Below.</p><p><img alt="image" src="/srinivasulla.github.io/assets/images/Dns1-0f3a3c401bb45c0bef09d33c080c57d3.jpg">
<img alt="image" src="/srinivasulla.github.io/assets/images/Dns2-3a99c23faa2ab12587ab18e9d2ea3390.jpg"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="2-pre-requisite-configuration"></a>2. Pre-requisite configuration<a class="hash-link" href="#2-pre-requisite-configuration" title="Direct link to heading">#</a></h4><p>In order to enable HTTPS, you need to get a SSL/TLS certificate from a Certificate Authority (CA)
As a free option, you can use Let&#x27;s Encrypt - a non-profit TLS CA. Its purpose is to try to make a safer internet by making it easier and cheaper to use TLS</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="21-deploy-the-cert-manager-for-kubernetes-115-119"></a>2.1. Deploy the Cert Manager for Kubernetes 1.15-1.19<a class="hash-link" href="#21-deploy-the-cert-manager-for-kubernetes-115-119" title="Direct link to heading">#</a></h4><p><a href="https://github.com/jetstack/cert-manager/tree/master/deploy/charts/cert-manager" target="_blank" rel="noopener noreferrer">Cert-manager</a> is a native Kubernetes certificate management controller
It can help with issuing certificates from a variety of sources, such as Letâ€™s Encrypt, HashiCorp Vault, Venafi, a simple signing keypair, or self-signed</p><p>Install the cert-manager CRDs <strong>before</strong> installing the cert-manager Helm</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply --validate=false -f https://github.com/jetstack/cert-manager/releases/download/v1.0.3/cert-manager.crds.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Add the Jetstack Helm repository</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">helm repo add jetstack https://charts.jetstack.io &amp;&amp; helm repo update</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Install the cert-manager</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">helm install cert-manager jetstack/cert-manager \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  --namespace cert-manager \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  --create-namespace \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  --version v1.0.3</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="22-deploy-the-cert-manager-for-kubernetes-120"></a>2.2. Deploy the Cert Manager for Kubernetes 1.20+<a class="hash-link" href="#22-deploy-the-cert-manager-for-kubernetes-120" title="Direct link to heading">#</a></h4><p><a href="https://github.com/jetstack/cert-manager/tree/master/deploy/charts/cert-manager" target="_blank" rel="noopener noreferrer">Cert-manager</a> is a native Kubernetes certificate management controller
It can help with issuing certificates from a variety of sources, such as Letâ€™s Encrypt, HashiCorp Vault, Venafi, a simple signing keypair, or self-signed</p><p>Install the cert-manager CRDs <strong>before</strong> installing the cert-manager Helm</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.10.0/cert-manager.crds.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Add the Jetstack Helm repository</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">helm repo add jetstack https://charts.jetstack.io &amp;&amp; helm repo update</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Install the cert-manager</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">helm install cert-manager jetstack/cert-manager \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  --namespace cert-manager \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  --create-namespace \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  --version v1.10.0</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="23-create-a-lets-encrypt-ca-clusterissuer-kubernetes-resource"></a>2.3. Create a Let&#x27;s Encrypt CA ClusterIssuer Kubernetes resource:<a class="hash-link" href="#23-create-a-lets-encrypt-ca-clusterissuer-kubernetes-resource" title="Direct link to heading">#</a></h4><p> ClusterIssuers (and Issuers) represent a certificate authority from which signed x509 certificates can be obtained, such as Letâ€™s Encrypt. You will need at least one ClusterIssuer in order to begin issuing certificates within your cluster</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">vi letsencrypt-clusterissuer.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cert</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">manager.io/v1alpha2</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterIssuer</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;your_clusterissuer_name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">acme</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">email</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;your_email</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//acme</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">v02.api.letsencrypt.org/directory</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">privateKeySecretRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;your_clusterissuer_name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">account</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">key</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">solvers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">http01</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ingress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">class</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Do not forget to set the name and email for your ClusterIssuer</p><p>For example</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cert</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">manager.io/v1alpha2</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterIssuer</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> letsencrypt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">prod</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">acme</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">email</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> support@testreportportal.com</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//acme</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">v02.api.letsencrypt.org/directory</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">privateKeySecretRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> letsencrypt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">prod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">account</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">key</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">solvers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">http01</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ingress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">class</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create -f letsencrypt-clusterissuer.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="3-update-your-reportportal-installation-with-a-new-ingress-configuration-to-be-access-at-a-tls-endpoint"></a>3. Update your ReportPortal installation with a new Ingress Configuration to be access at a TLS endpoint<a class="hash-link" href="#3-update-your-reportportal-installation-with-a-new-ingress-configuration-to-be-access-at-a-tls-endpoint" title="Direct link to heading">#</a></h4><p>With all the pre-requisite configuration in place, we can now do the pieces to request the TLS certificate</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="31-add-the-certmanager-annotation"></a>3.1. Add the certmanager annotation:<a class="hash-link" href="#31-add-the-certmanager-annotation" title="Direct link to heading">#</a></h4><p>Add the following annotation to your Ingress configuration by editing ReportPortal Helm chart values.yaml file</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">cert-manager.io/cluster-issuer: &quot;letsencrypt-prod&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The result in values.yaml</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">..</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/ingress.class</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/ssl-redirect</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;false&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/rewrite-target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /$2</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/x-forwarded-prefix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /$1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/proxy-body-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 128m</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/proxy-buffer-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 512k</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/proxy-buffers-number</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;4&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/proxy-busy-buffers-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 512k</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/proxy-connect-timeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2000&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/proxy-read-timeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1000&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/proxy-send-timeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1000&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">cert-manager.io/cluster-issuer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;letsencrypt-prod&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="32-update-your-reportportal-ingress-configuration"></a>3.2. Update your ReportPortal Ingress configuration:<a class="hash-link" href="#32-update-your-reportportal-ingress-configuration" title="Direct link to heading">#</a></h4><p>Edit gateway-ingress.yaml template in your copy of ReportPortal Helm chart, and add the following right after &#x27;spec&#x27;</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tls</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">hosts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> &lt;your_domain_name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">secretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;your_certificate_secretname</span><span class="token punctuation" style="color:#393A34">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>You will create your certificate with secretname on the next step</p></blockquote><p>Let&#x27;s suppose your domain name is &#x27;my.reportportal.com&#x27; and your certificate secretname is &#x27;my.reportportal.com-tls&#x27;</p><p>Then the result in your gateway-ingress.yaml file will be</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tls</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">hosts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> my.reportportal.com</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">secretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my.reportportal.com</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tls</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">..</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="33-redeploy-or-upgrade-your-reporportal-installation-with-helm"></a>3.3. Redeploy or upgrade your ReporPortal installation with Helm<a class="hash-link" href="#33-redeploy-or-upgrade-your-reporportal-installation-with-helm" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="4-create-a-certificate-resource-in-kubernetes-with-acme-http-challenge-configured"></a>4. Create a Certificate resource in Kubernetes with acme http challenge configured:<a class="hash-link" href="#4-create-a-certificate-resource-in-kubernetes-with-acme-http-challenge-configured" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">vi certificate-tls.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> certmanager.k8s.io/v1alpha1</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Certificate</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;your_certificate_name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">secretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;your_certificate_secretname</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">dnsNames</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> &lt;your_domain_name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">acme</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">http01</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ingressClass</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">domains</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> &lt;your_domain_name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">issuerRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;your_clusterissuer_name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterIssuer</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For our example</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> certmanager.k8s.io/v1alpha1</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Certificate</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my.reportportal.com</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tls</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">secretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my.reportportal.com</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tls</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">dnsNames</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> my.reportportal.com</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">acme</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">http01</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ingressClass</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">domains</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> my.reportportal.com</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">issuerRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> letsencrypt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">prod</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterIssuer</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create -f certificate-tls.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Once this resource is created, there should be a tls cert that is created. If not, then check the logs of the cert-manger service for errors</p><p>In order to check the certificate and secret</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get certificates</span></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl describe certificate &lt;your_certificate_name&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get secrets</span></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl describe secret &lt;your_certificate_secretname&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now you should be able to run your ReportPortal installation over HTTPS</p><p>Please take into account that you don&#x27;t have to re-deploy the application in order to apply changes</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/srinivasulla.github.io/docs/Articles/RestAssuredExtent"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Advanced RestAssured Logging in Extent Report</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/srinivasulla.github.io/docs/Articles/MobileAppTesting"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Things To Test Before Going Live With A Mobile App Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overall-information" class="table-of-contents__link">Overall information</a></li><li><a href="#prerequisites" class="table-of-contents__link">PreRequisites:</a></li><li><a href="#run-reportportal-over-ssl-https" class="table-of-contents__link">Run ReportPortal over SSL (HTTPS)</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/srinivasulla.github.io/docs/Articles/2019-05-28-SonarQube">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">GitHub Profile</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/sullaganti" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/srinivasulla.github.io/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 By Srinivasulu Ullaganti.</div></div></div></footer></div>
<script src="/srinivasulla.github.io/assets/js/runtime~main.42965fa5.js"></script>
<script src="/srinivasulla.github.io/assets/js/main.7e84ffa8.js"></script>
</body>
</html>